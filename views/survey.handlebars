<body class="survey">
	{{!-- <h1 class="display-3 padding-bottom-3 text-info mt-3" style="margin-bottom: 20px">Pick-a-Pal</h1> --}}
	<div class="card text-dark">
		<img class="card-img" src="https://phz8.petinsurance.com/-/media/all-phz-images/2017-images-850/save-grass-dogs-hero850.jpg" alt="Card image">
		<div class="card-img-overlay col-md-6">
			<div class="jumbotron jumbotron-fluid bg-light shadow p-3 mb-5 bg-white rounded" style="margin-top: 10%;">
				<div class="container">
					<h1 class="display-3 padding-bottom-3 text-info mt-3" style="margin-bottom: 20px">Pick-a-Pal</h1>
					<h3>Survey Questions</h3>

					<form>
						<div class="row">
							<div class="col-sm-12">
								<div class="form-group">
									<label for="name">Name (Required)</label>
									<input type="text" class="form-control" id="name" placeholder="Enter name" required>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-sm-12">
								<div class="form-group">
									<label for="photo">Photo (Required)</label>
									<input type="text" class="form-control" id="photo" required>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="q0">1. How much shedding would you tolerate? </label>
									<select class="form-control" id="q0">
										<option value="" disabled selected>Choose your options></option>
										<option value="1">1. None</option>
										<option value="2">2. Light</option>
										<option value="3">3. Moderate</option>
										<option value="4">4. Heavy</option>
									</select>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="q1">2. How big or small will your dog be? </label>
									<select class="form-control" id="q1">
										<option value="" disabled selected>Choose your options></option>
										<option value="1">1. Under 10lbs</option>
										<option value="2">2. From 10 to 20lbs</option>
										<option value="3">3. From 20 to 40lbs</option>
										<option value="4">4. From 40 to 80lbs</option>
										<option value="5">5. From 80 to 1200lbs</option>
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="q2">3. How would you describe your home?</label>
									<select class="form-control" id="q2">
										<option value="" disabled selected>Choose your options></option>
										<option value="1">1. A Home With No Outdoor Space</option>
										<option value="2">2. A Home With a Small Yard or Nearby Park</option>
										<option value="3">3. A Home With A Fenced-In Yard</option>
										<option value="4">4. A Home With Abundant Outdoor Space</option>											
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="q3">4. When it comes to training your dog, what do you prefer? </label>
									<select class="form-control" id="q3">
										<option value="" disabled selected>Choose your options></option>
										<option value="1">1. No training needed</option>
										<option value="2">2. Needs Little Training and Learns Easily</option>
										<option value="3">3. Requires Some Training</option>
										<option value="4">4. Will Thrive With Substantial Training</option>						
									</select>

								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="q4">5. What is your budget like?</label>
									<select class="form-control" id="q4">
										<option value="" disabled selected>Choose your options></option>
										<option value="1">0-$200</option>
										<option value="2">$200-$600</option>
										<option value="3">$600-$1200</option>
										<option value="4">$1200-$3600</option>										
									</select>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-6">
								<div class="form-group">
									<label for="q5">6. Does the family have any of the following?</label>
									<select class="form-control" id="q5">
										<option value="" disabled selected>Choose your options></option>
										<option value="1">1. Infants or the Infirmed</option>
										<option value="2">2. Kids under 8</option>
										<option value="3">3. Kids over 8</option>
										<option value="4">4. None of the above</option>
										<!-- <option value="5">5 (Strongly Agree)</option> -->
									</select>
								</div>
							</div>
						</div>


						<button id="submitButton" type="submit" name="action" class="btn btn-primary bg-info" data-toggle="modal">Send</button>
						<!-- data-target="#modal1" -->
					</form>
				</div>
			</div>
			<div class='col s4'>
				<p>					
					<a href='https://github.com/thomson3914/Friend-Finder' class="text-info" target='_blank'>GitHub Repo</a>
				</p>
			</div>
		</div>
	</div>


	<!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h2 class="modal-title">
						<strong>Best Match</strong>
					</h2>
				</div>
				<div class="modal-body">
					{{!-- //
					<h2 id="matchinterestedbreed">Breed that will match</h2> --}}
					<img class="img-responsive" id="matchImg" src="" alt="">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-default" data="modal" id="storesearch">Find a store!</button>
				</div>
			</div>

		</div>
	</div>

	<script type="text/javascript">
		//custom google search query//
		var zipcode = $("#zipcode").val();  //need to fix zipcode variable it is showing blank doesn't matter if this function is above the other click or not. maybe afer submit .then this one?

		var queryurl = "https://www.google.com/search?source=hp&ei=FXKRW_bDIcK4sQWFh6GoAw&q=puppy+store+" + zipcode;


		$("#storesearch").on("click", function () {
			window.open(queryurl, '_blank');
			console.log("onclickworking");
			console.log(zipcode)
		});


		// capture form inputs
		$("#submit").on("click", function () {
			// Form Validation
			function validateForm() {
				var isValid = true;
				$(".form-control").each(function () {
					if ($(this).val() === "") {
						isValid = false;
					}
				});
				$(".chosen-select").each(function () {
					if ($(this).val() === "") {
						isValid = false;
					}
				});
				return isValid;
			}
			// if all required fields are filled
			if (validateForm()) {
				// create an object for the users data
				var userData = {
					humanname: $("#humanname").val().trim(),
					zipcode: $("#zipcode").val().trim(),
					//interestedbreed: $("#interestedbreed").val().trim(),
					//image: $("#image").val().trim(),
					q0: $("#q0").val(),
					q1: $("#q1").val(),
					q2: $("#q2").val(),
					q3: $("#q3").val(),
					q4: $("#q4").val(),
					q5: $("#q5").val(),
					q6: $("#q6").val()

				};

				// Chosen CSS
				var config = {
					".chosen-select": {},
					".chosen-select-deselect": { allow_single_deselect: true },
					".chosen-select-no-single": { disable_search_threshold: 10 },
					".chosen-select-no-result": { no_results_text: "Oops, nothing found!" },
					".chosen-select-width": { width: "95%" }
				};
				for (var selector in config) {
					$(selector).chosen(config[selector]);
				}
				// console.log(userData);
				// grab the url of the website
				var currentURL = window.location.origin;
				// ajax post the data to the friends api
				$.post(currentURL + '/api/pickapal', userData, function (data) {
					// grab the result from the ajax post so that the best match's name and photo displayed
					$("#matchhumanName").text(data.humanname);
					//$("#matchinterestedbreed").text(data.interestedbreed);
					//$("#matchImg").attr("src", data.image);
					// show modal with the best match
					$("#resultsModal").modal("toggle");
					// alert("working");
				});
			} else {
				alert("Please enter all fields before submitting!");
			}
			return false;
		});


	</script>

</body>

			